<script type="text/javascript">
    var area_count = 0;
    //加载地域信息
    function getAreaList(rid, rcode, rname) {
        $.get('/Txooo/SalesV2/Member/Ajax/MemberAjax.ajax/Area', { parentId: rid }, function (data) {
            var obj = eval(data);
            if (obj.length > 0) {
                window.sessionStorage['#user_area_' + area_count] = rname;
                area_count++;
                $('#user_area_' + area_count).html(template("area_temp_" + +area_count, { list: obj }));                
            }
        });
    };
    function downAreaCount() { area_count--; }
</script>
<div class="app-page" data-page="user_area_1">
    <div class="app-topbar  h1010">
        <div class="app-button left" onclick="downAreaCount()" data-back></div>
        <div class="app-title">选择地区</div>
    </div>
    <div class="app-content">
        <ul class="app-list" id="user_area_1"></ul>
    </div>
</div>
<div class="app-page" data-page="user_area_2">
    <div class="app-topbar  h1010">
        <div class="app-button left" onclick="downAreaCount()" data-back></div>
        <div class="app-title">选择地区</div>
    </div>
    <div class="app-content">
        <ul class="app-list" id="user_area_2"></ul>
    </div>
</div>
<div class="app-page" data-page="user_area_3">
    <div class="app-topbar  h1010">
        <div class="app-button left" onclick="downAreaCount()" data-back></div>
        <div class="app-title">选择地区</div>
    </div>
    <div class="app-content">
        <ul class="app-list" id="user_area_3"></ul>
    </div>
</div>
<script type="text/html" id="area_temp_1">
    {{each list as c}}
    <li class="app-button" onclick="getAreaList('{{c.region_id}}', '{{c.region_code}}', '{{c.region_name}}')" data-target="user_area_2">{{c.region_name}}</li>
    {{/each}}
</script>
<script type="text/html" id="area_temp_2">
    {{each list as c}}
    <li class="app-button" onclick="getAreaList('{{c.region_id}}', '{{c.region_code}}', '{{c.region_name}}')" data-target="user_area_3">{{c.region_name}}</li>
    {{/each}}
</script>
<script type="text/html" id="area_temp_3">
    {{each list as c}}
    <li class="app-button" data-id="{{c.region_id}}" data-code="{{c.region_code}}">{{c.region_name}}</li>
    {{/each}}
</script>
